<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CV Generator PRO â€” Buat CV Profesional</title>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&family=Fraunces:ital,wght@0,700;0,900;1,700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>

/* ==============================
   CSS VARIABLES â€” selaras landing
   ============================== */
:root {
  --bg:        #f9f7f4;
  --bg2:       #ffffff;
  --bg3:       #f0ede8;
  --panel:     #ffffff;
  --card:      #f9f7f4;
  --border:    #e0dbd4;
  --text:      #1a1714;
  --text2:     #4a4540;
  --muted:     #8a837a;
  --primary:   #e8601c;
  --primary-d: #c44e14;
  --primary-l: #fff0e8;
  --accent:    #2563eb;
  --danger:    #ef4444;
  --success:   #22c55e;
  --preview-bg:#e8e4df;
  --shadow:    0 2px 16px rgba(26,23,20,0.08);
  --shadow-lg: 0 8px 40px rgba(26,23,20,0.15);
}

[data-theme="dark"] {
  --bg:        #0e0d0b;
  --bg2:       #141310;
  --bg3:       #1a1814;
  --panel:     #141310;
  --card:      #1a1814;
  --border:    #2a2620;
  --text:      #f2ede8;
  --text2:     #b8b0a8;
  --muted:     #6e6760;
  --primary:   #f07030;
  --primary-d: #e8601c;
  --primary-l: #2a1a0e;
  --accent:    #60a5fa;
  --danger:    #ef4444;
  --success:   #34d399;
  --preview-bg:#0a0908;
  --shadow:    0 2px 16px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 40px rgba(0,0,0,0.55);
}

/* ==============================
   RESET & BASE
   ============================== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }

body {
  font-family: 'Sora', sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  height: 100vh;
  overflow: hidden;
  transition: background 0.3s, color 0.3s;
}

.app { display: flex; width: 100%; height: 100vh; }

/* ==============================
   LEFT PANEL
   ============================== */
.form-panel {
  width: 380px; min-width: 380px;
  background: var(--panel); border-right: 1px solid var(--border);
  display: flex; flex-direction: column; height: 100vh; overflow: hidden;
  transition: background 0.3s, border-color 0.3s;
}

/* Header */
.panel-header {
  padding: 14px 18px; border-bottom: 1px solid var(--border);
  background: var(--panel); flex-shrink: 0;
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
}

.panel-logo {
  display: flex; align-items: center; gap: 8px;
  font-family: 'Fraunces', serif; font-size: 16px; font-weight: 900;
  color: var(--text); text-decoration: none; white-space: nowrap;
}
.panel-logo-icon {
  width: 30px; height: 30px; border-radius: 8px;
  background: linear-gradient(135deg, var(--primary), #f5a623);
  display: flex; align-items: center; justify-content: center;
  font-size: 15px; flex-shrink: 0;
}
.panel-logo span { color: var(--primary); }

.panel-header-right { display: flex; align-items: center; gap: 7px; }

.btn-theme {
  padding: 0 10px; height: 32px; border-radius: 8px;
  background: var(--bg3); border: 1px solid var(--border);
  cursor: pointer; font-size: 10px; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; flex-shrink: 0; color: var(--text);
  font-family: 'Sora', sans-serif; white-space: nowrap;
}
.btn-theme:hover { background: var(--primary-l); border-color: var(--primary); }

.btn-back {
  padding: 5px 11px; background: var(--bg3); border: 1px solid var(--border);
  border-radius: 7px; font-family: 'Sora', sans-serif;
  font-size: 10.5px; font-weight: 600; color: var(--text2);
  cursor: pointer; transition: all 0.2s; white-space: nowrap;
  text-decoration: none; display: inline-flex; align-items: center; gap: 3px;
}
.btn-back:hover { color: var(--primary); border-color: var(--primary); background: var(--primary-l); }

/* Progress */
.panel-progress {
  padding: 9px 18px 11px; border-bottom: 1px solid var(--border);
  flex-shrink: 0; background: var(--panel);
}
.progress-label {
  display: flex; justify-content: space-between;
  font-size: 10px; color: var(--muted); margin-bottom: 5px; font-weight: 600;
}
.progress { height: 5px; background: var(--border); border-radius: 10px; }
.progress-bar {
  height: 100%; width: 0%;
  background: linear-gradient(90deg, var(--primary), #f5a623);
  border-radius: 10px; transition: width 0.4s ease;
}

/* Tabs */
.tabs {
  display: flex; border-bottom: 1px solid var(--border);
  flex-shrink: 0; overflow-x: auto; background: var(--panel);
}
.tab-btn {
  flex: 1; min-width: 52px; padding: 9px 3px;
  background: none; border: none; color: var(--muted);
  font-family: 'Sora', sans-serif; font-size: 9px; font-weight: 700;
  cursor: pointer; border-bottom: 2px solid transparent;
  transition: all 0.2s; text-transform: uppercase; letter-spacing: 0.4px;
}
.tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); }
.tab-btn:hover:not(.active) { color: var(--text); }

/* Form scroll */
.form-scroll { overflow-y: auto; flex: 1; padding: 15px 16px 28px; }
.tab-section { display: none; }
.tab-section.active { display: block; }

/* Section label */
.sec-label {
  font-size: 10.5px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 1px; color: var(--primary); margin-bottom: 11px;
  padding-bottom: 7px; border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 5px;
}

/* Fields */
.field-group { margin-bottom: 11px; }
.field-label {
  display: block; font-size: 9.5px; font-weight: 700;
  color: var(--muted); text-transform: uppercase;
  letter-spacing: 0.6px; margin-bottom: 4px;
}

input[type="text"],
input[type="email"],
input[type="tel"],
input[type="date"],
select,
textarea {
  width: 100%; padding: 8px 10px;
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: 7px; color: var(--text);
  font-family: 'Sora', sans-serif; font-size: 12.5px;
  outline: none; transition: border-color 0.2s, box-shadow 0.2s, background 0.3s;
}
input:focus, select:focus, textarea:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(232,96,28,0.11);
  background: var(--bg2);
}
textarea { resize: vertical; min-height: 86px; }
textarea.large { min-height: 120px; }
select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath fill='%238a837a' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: right 10px center; cursor: pointer;
}
.row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }

/* Buttons */
.btn {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 7px 12px; border: none; border-radius: 7px;
  cursor: pointer; font-family: 'Sora', sans-serif;
  font-size: 11px; font-weight: 700; transition: all 0.2s;
}
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--primary-d); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(232,96,28,0.28); }
.btn-danger { background: var(--danger); color: white; }
.btn-danger:hover { background: #dc2626; }
.btn-ghost { background: var(--bg3); color: var(--text2); border: 1px solid var(--border); }
.btn-ghost:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-l); }
.btn-sm { padding: 4px 9px; font-size: 10px; }

.btn-add {
  width: 100%; padding: 8px; background: transparent;
  border: 1.5px dashed var(--border); border-radius: 7px;
  color: var(--muted); font-family: 'Sora', sans-serif;
  font-size: 11px; font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: 5px;
}
.btn-add:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-l); }

/* Item cards */
.item-card {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: 9px; padding: 11px; margin-bottom: 8px;
}
.item-card-header {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 9px;
}
.item-card-title { font-size: 10.5px; font-weight: 700; color: var(--primary); }

/* Photo */
.photo-upload-wrap { display: flex; align-items: center; gap: 12px; margin-bottom: 13px; }
.photo-preview {
  width: 64px; height: 64px; border-radius: 50%;
  background: var(--bg3); border: 2px dashed var(--border);
  display: flex; align-items: center; justify-content: center;
  overflow: hidden; flex-shrink: 0; cursor: pointer; transition: border-color 0.2s;
}
.photo-preview:hover { border-color: var(--primary); }
.photo-preview img { width: 100%; height: 100%; object-fit: cover; }
.photo-upload-info { font-size: 10.5px; color: var(--muted); margin-top: 4px; }

/* Template grid */
.template-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.template-card {
  border: 2px solid var(--border); border-radius: 9px; padding: 8px;
  cursor: pointer; transition: all 0.2s; text-align: center; background: var(--bg3);
}
.template-card:hover, .template-card.selected {
  border-color: var(--primary); background: var(--primary-l);
}
.template-thumb {
  height: 60px; border-radius: 6px;
  display: flex; align-items: center; justify-content: center;
  font-size: 19px; margin-bottom: 5px;
}
.template-name { font-size: 10px; font-weight: 700; color: var(--text); }
.template-desc { font-size: 9px; color: var(--muted); margin-top: 1px; }

/* Skill badge */
.skill-badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 3px 8px; background: var(--primary-l);
  border: 1px solid rgba(232,96,28,0.22);
  border-radius: 20px; font-size: 10.5px; color: var(--primary);
  margin: 2px; cursor: default;
}
.skill-badge .del { cursor: pointer; opacity: 0.55; font-size: 13px; line-height: 1; }
.skill-badge .del:hover { opacity: 1; color: var(--danger); }
.skill-input-row { display: flex; gap: 6px; }

/* Control bar */
.control-bar {
  display: flex; gap: 6px; flex-wrap: wrap;
  padding: 11px 16px; border-top: 1px solid var(--border);
  background: var(--panel); flex-shrink: 0; align-items: center;
}

/* ==============================
   RIGHT / PREVIEW PANEL
   ============================== */
.preview-panel {
  flex: 1; padding: 20px; overflow: auto;
  background: var(--preview-bg);
  display: flex; flex-direction: column; align-items: center;
  transition: background 0.3s;
}

#cv-wrapper {
  background: white; width: 794px; min-height: 1123px;
  box-shadow: var(--shadow-lg); transform-origin: top center; flex-shrink: 0;
}

/* ==============================
   CV TEMPLATES (output â€” always white)
   ============================== */

/* MODERN */
.cv-modern{color:#1e293b;font-family:'Sora',sans-serif;}
.cv-modern .cv-header{background:linear-gradient(135deg,#e8601c,#f5a623);color:white;padding:30px 38px;display:flex;gap:22px;align-items:center;}
.cv-modern .cv-photo{width:84px;height:84px;border-radius:50%;border:3px solid rgba(255,255,255,0.4);overflow:hidden;flex-shrink:0;}
.cv-modern .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-modern .cv-name{font-size:24px;font-weight:800;letter-spacing:-0.5px;}
.cv-modern .cv-title{font-size:13px;opacity:0.88;margin-top:4px;}
.cv-modern .cv-contact{display:flex;flex-wrap:wrap;gap:10px;margin-top:9px;font-size:11px;opacity:0.92;}
.cv-modern .cv-body{display:flex;}
.cv-modern .cv-main{flex:1;padding:22px 26px;}
.cv-modern .cv-sidebar{width:210px;padding:22px 18px;background:#faf9f7;border-left:1px solid #ede9e4;}
.cv-modern .sec-title{font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:1.5px;color:#e8601c;margin-bottom:11px;display:flex;align-items:center;gap:6px;}
.cv-modern .sec-title::after{content:'';flex:1;height:2px;background:linear-gradient(90deg,#e8601c,transparent);}
.cv-modern .sec-block{margin-bottom:18px;}
.cv-modern .exp-block{margin-bottom:13px;padding-bottom:13px;border-bottom:1px solid #f1ece7;}
.cv-modern .exp-title{font-size:13px;font-weight:700;color:#1e293b;}
.cv-modern .exp-company{font-size:12px;color:#e8601c;font-weight:600;}
.cv-modern .exp-year{font-size:11px;color:#94a3b8;}
.cv-modern .exp-detail{font-size:12px;color:#475569;margin-top:3px;line-height:1.5;}
.cv-modern .sidebar-sec{margin-bottom:16px;}
.cv-modern .sidebar-label{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1px;color:#e8601c;margin-bottom:7px;}
.cv-modern .skill-pill{display:inline-block;padding:2px 9px;background:#fff0e8;color:#c44e14;border-radius:20px;font-size:10px;font-weight:600;margin:2px;}
.cv-modern .info-row{font-size:11px;color:#475569;margin-bottom:4px;}
.cv-modern .ring-text{font-size:12px;color:#475569;line-height:1.7;}
.cv-modern .lang-item{display:flex;justify-content:space-between;font-size:11px;color:#475569;margin-bottom:3px;}
.cv-modern .cert-item{font-size:11px;color:#475569;margin-bottom:3px;padding-left:9px;border-left:2px solid #f5a623;}

/* FORMAL */
.cv-formal{color:#1a1a2e;font-family:'Sora',sans-serif;}
.cv-formal .cv-header{padding:30px 46px;border-bottom:3px solid #1a1a2e;text-align:center;}
.cv-formal .cv-photo-wrap{display:flex;justify-content:center;margin-bottom:11px;}
.cv-formal .cv-photo{width:78px;height:78px;border-radius:50%;border:2px solid #1a1a2e;overflow:hidden;}
.cv-formal .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-formal .cv-name{font-size:26px;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:#1a1a2e;}
.cv-formal .cv-title{font-size:12px;letter-spacing:3px;text-transform:uppercase;color:#e8601c;margin-top:5px;}
.cv-formal .cv-contact{display:flex;flex-wrap:wrap;justify-content:center;gap:14px;margin-top:9px;font-size:11px;color:#475569;}
.cv-formal .cv-body{padding:26px 46px;}
.cv-formal .sec-title{font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:2px;color:#1a1a2e;margin-bottom:10px;padding-bottom:5px;border-bottom:1px solid #1a1a2e;}
.cv-formal .sec-block{margin-bottom:20px;}
.cv-formal .exp-block{margin-bottom:12px;}
.cv-formal .exp-header{display:flex;justify-content:space-between;align-items:baseline;}
.cv-formal .exp-title{font-size:13px;font-weight:700;}
.cv-formal .exp-year{font-size:11px;color:#64748b;}
.cv-formal .exp-company{font-size:12px;color:#e8601c;font-style:italic;}
.cv-formal .exp-detail{font-size:12px;color:#475569;margin-top:3px;line-height:1.5;}
.cv-formal .skill-wrap{display:flex;flex-wrap:wrap;gap:5px;}
.cv-formal .skill-pill{padding:3px 9px;border:1px solid #1a1a2e;font-size:10px;font-weight:600;border-radius:3px;}
.cv-formal .ring-text{font-size:12px;color:#475569;line-height:1.7;}
.cv-formal .edu-block{margin-bottom:9px;display:flex;justify-content:space-between;align-items:baseline;}
.cv-formal .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.cv-formal .info-row{font-size:11px;color:#475569;}
.cv-formal .lang-item{font-size:11px;color:#475569;display:inline-block;margin-right:11px;}
.cv-formal .cert-item{font-size:11px;color:#475569;margin-bottom:3px;}

/* CLASSIC */
.cv-classic{color:#2d2d2d;font-family:'Sora',sans-serif;}
.cv-classic .cv-header{background:#1e293b;color:white;padding:26px 34px;display:flex;gap:18px;align-items:center;}
.cv-classic .cv-photo{width:80px;height:80px;border-radius:8px;overflow:hidden;border:2px solid rgba(255,255,255,0.2);flex-shrink:0;}
.cv-classic .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-classic .cv-name{font-size:22px;font-weight:800;}
.cv-classic .cv-title{font-size:12px;color:#94a3b8;margin-top:3px;}
.cv-classic .cv-contact{display:flex;flex-wrap:wrap;gap:10px;margin-top:7px;font-size:10px;color:#cbd5e1;}
.cv-classic .cv-body{display:flex;}
.cv-classic .cv-left{width:192px;background:#f8f6f4;padding:18px;border-right:1px solid #e0dbd4;}
.cv-classic .cv-right{flex:1;padding:20px 24px;}
.cv-classic .sec-title{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1.5px;color:#1e293b;margin-bottom:9px;padding-bottom:3px;border-bottom:2px solid #1e293b;}
.cv-classic .sec-block{margin-bottom:16px;}
.cv-classic .exp-block{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e8e2db;}
.cv-classic .exp-title{font-size:12px;font-weight:700;}
.cv-classic .exp-company{font-size:11px;color:#475569;font-weight:600;}
.cv-classic .exp-year{font-size:10px;color:#94a3b8;background:#e8e2db;padding:1px 6px;border-radius:10px;display:inline-block;margin-top:2px;}
.cv-classic .exp-detail{font-size:11px;color:#475569;margin-top:3px;line-height:1.5;}
.cv-classic .skill-bar-item{margin-bottom:7px;}
.cv-classic .skill-bar-label{font-size:10px;font-weight:600;margin-bottom:2px;}
.cv-classic .skill-bar{height:4px;background:#e0dbd4;border-radius:10px;}
.cv-classic .skill-bar-fill{height:100%;background:#e8601c;border-radius:10px;}
.cv-classic .info-row{font-size:10px;color:#475569;margin-bottom:4px;}
.cv-classic .ring-text{font-size:11px;color:#475569;line-height:1.7;}
.cv-classic .lang-item{font-size:10px;color:#475569;margin-bottom:3px;}
.cv-classic .cert-item{font-size:10px;color:#475569;margin-bottom:3px;}

/* PROFESSIONAL */
.cv-professional{color:#1e293b;font-family:'Sora',sans-serif;}
.cv-professional .cv-header{padding:28px 38px;background:#0f172a;color:white;display:flex;justify-content:space-between;align-items:center;gap:18px;}
.cv-professional .cv-left-head{flex:1;}
.cv-professional .cv-photo{width:80px;height:80px;border-radius:50%;overflow:hidden;border:3px solid #e8601c;flex-shrink:0;}
.cv-professional .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-professional .cv-name{font-size:24px;font-weight:800;}
.cv-professional .cv-title{font-size:12px;color:#94a3b8;margin-top:3px;}
.cv-professional .cv-tags{display:flex;flex-wrap:wrap;gap:7px;margin-top:9px;}
.cv-professional .cv-tag{font-size:9.5px;padding:2px 9px;border:1px solid rgba(232,96,28,0.4);color:#f07030;border-radius:20px;}
.cv-professional .cv-stripe{height:4px;background:linear-gradient(90deg,#e8601c,#f5a623,#22c55e);}
.cv-professional .cv-body{display:flex;}
.cv-professional .cv-main{flex:1;padding:20px 26px;}
.cv-professional .cv-sidebar{width:203px;padding:20px 16px;background:#faf9f7;border-left:1px solid #ede9e4;}
.cv-professional .sec-title{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1.5px;color:#e8601c;margin-bottom:11px;display:flex;align-items:center;gap:7px;}
.cv-professional .sec-title::before{content:'';width:11px;height:11px;background:#e8601c;border-radius:3px;flex-shrink:0;}
.cv-professional .sec-block{margin-bottom:18px;}
.cv-professional .exp-block{margin-bottom:12px;padding:10px;background:#faf9f7;border-radius:7px;border-left:3px solid #e8601c;}
.cv-professional .exp-title{font-size:12px;font-weight:700;}
.cv-professional .exp-company{font-size:11px;color:#e8601c;font-weight:600;}
.cv-professional .exp-year{font-size:10px;color:#94a3b8;}
.cv-professional .exp-detail{font-size:11px;color:#475569;margin-top:3px;line-height:1.5;}
.cv-professional .sidebar-sec{margin-bottom:16px;}
.cv-professional .sidebar-label{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1px;color:#e8601c;margin-bottom:7px;}
.cv-professional .skill-pill{display:block;font-size:10px;font-weight:600;color:#e8601c;padding:3px 0;border-bottom:1px solid #ede9e4;}
.cv-professional .ring-text{font-size:11px;color:#475569;line-height:1.7;}
.cv-professional .info-row{font-size:10px;color:#475569;margin-bottom:4px;word-break:break-all;}
.cv-professional .lang-item{font-size:10px;color:#475569;margin-bottom:3px;}
.cv-professional .cert-item{font-size:10px;color:#475569;margin-bottom:3px;padding-left:7px;border-left:2px solid #f5a623;}

/* MINIMAL */
.cv-minimal{color:#18181b;font-family:'Sora',sans-serif;}
.cv-minimal .cv-header{padding:38px 48px 22px;border-bottom:1px solid #e4e4e7;}
.cv-minimal .cv-photo{width:66px;height:66px;border-radius:50%;overflow:hidden;float:right;margin-left:14px;border:1px solid #e4e4e7;}
.cv-minimal .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-minimal .cv-name{font-size:28px;font-weight:800;letter-spacing:-1px;}
.cv-minimal .cv-title{font-size:13px;color:#71717a;margin-top:3px;}
.cv-minimal .cv-contact{display:flex;flex-wrap:wrap;gap:12px;margin-top:9px;font-size:11px;color:#71717a;}
.cv-minimal .cv-body{padding:22px 48px;}
.cv-minimal .sec-title{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:2px;color:#a1a1aa;margin-bottom:10px;}
.cv-minimal .sec-block{margin-bottom:20px;}
.cv-minimal .exp-block{display:flex;gap:14px;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #f4f4f5;}
.cv-minimal .exp-year-col{width:96px;flex-shrink:0;font-size:10px;color:#a1a1aa;padding-top:1px;}
.cv-minimal .exp-title{font-size:12px;font-weight:700;}
.cv-minimal .exp-company{font-size:11px;color:#71717a;}
.cv-minimal .exp-detail{font-size:11px;color:#71717a;margin-top:2px;line-height:1.5;}
.cv-minimal .skill-wrap{display:flex;flex-wrap:wrap;gap:5px;}
.cv-minimal .skill-pill{padding:2px 9px;border:1px solid #e4e4e7;font-size:10px;border-radius:4px;color:#52525b;}
.cv-minimal .ring-text{font-size:12px;color:#52525b;line-height:1.8;}
.cv-minimal .info-row{display:flex;gap:14px;flex-wrap:wrap;font-size:11px;color:#71717a;}
.cv-minimal .lang-item{font-size:11px;color:#52525b;display:inline-block;margin-right:11px;}
.cv-minimal .cert-item{font-size:11px;color:#52525b;margin-bottom:3px;}

/* CREATIVE */
.cv-creative{color:#1e1b4b;font-family:'Sora',sans-serif;}
.cv-creative .cv-header{background:linear-gradient(135deg,#1a1714 55%,#2d1a0a);color:white;padding:26px 34px;position:relative;overflow:hidden;}
.cv-creative .cv-header::before{content:'';position:absolute;top:-50px;right:-50px;width:180px;height:180px;border-radius:50%;background:rgba(232,96,28,0.18);}
.cv-creative .cv-header::after{content:'';position:absolute;bottom:-30px;left:90px;width:110px;height:110px;border-radius:50%;background:rgba(245,166,35,0.12);}
.cv-creative .cv-top{display:flex;align-items:center;gap:18px;position:relative;z-index:1;}
.cv-creative .cv-photo{width:80px;height:80px;border-radius:10px;overflow:hidden;border:2px solid rgba(232,96,28,0.5);flex-shrink:0;}
.cv-creative .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-creative .cv-name{font-size:24px;font-weight:800;}
.cv-creative .cv-title{font-size:12px;color:#fbbf88;margin-top:3px;}
.cv-creative .cv-contact-bar{display:flex;flex-wrap:wrap;gap:14px;margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.15);font-size:10px;color:#fbbf88;position:relative;z-index:1;}
.cv-creative .cv-body{display:flex;}
.cv-creative .cv-main{flex:1;padding:20px 26px;}
.cv-creative .cv-sidebar{width:203px;padding:20px 16px;background:#fdf8f4;}
.cv-creative .sec-title{font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:1px;color:#c44e14;margin-bottom:10px;padding-bottom:5px;border-bottom:2px solid #fff0e8;}
.cv-creative .sec-block{margin-bottom:18px;}
.cv-creative .exp-block{margin-bottom:12px;}
.cv-creative .exp-badge{display:inline-block;font-size:9.5px;font-weight:700;padding:1px 7px;background:#fff0e8;color:#c44e14;border-radius:20px;margin-bottom:3px;}
.cv-creative .exp-title{font-size:12px;font-weight:700;color:#1a1714;}
.cv-creative .exp-company{font-size:11px;color:#e8601c;font-weight:600;}
.cv-creative .exp-detail{font-size:11px;color:#475569;margin-top:2px;line-height:1.5;}
.cv-creative .sidebar-sec{margin-bottom:16px;}
.cv-creative .sidebar-label{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1px;color:#c44e14;margin-bottom:7px;}
.cv-creative .skill-pill{display:inline-block;padding:2px 9px;background:#fff0e8;color:#c44e14;border-radius:20px;font-size:10px;font-weight:600;margin:2px;}
.cv-creative .ring-text{font-size:11px;color:#475569;line-height:1.7;}
.cv-creative .info-row{font-size:10px;color:#475569;margin-bottom:4px;}
.cv-creative .lang-item{font-size:10px;color:#475569;margin-bottom:3px;}
.cv-creative .cert-item{font-size:10px;color:#475569;margin-bottom:3px;padding-left:7px;border-left:2px solid #f5a623;}

/* EXECUTIVE */
.cv-executive{color:#1e293b;font-family:'Sora',sans-serif;}
.cv-executive .cv-header{background:#0f172a;color:white;padding:0;display:flex;}
.cv-executive .cv-head-left{background:linear-gradient(135deg,#1e1208,#0f172a);padding:26px 22px;width:228px;flex-shrink:0;display:flex;flex-direction:column;align-items:center;text-align:center;}
.cv-executive .cv-photo{width:84px;height:84px;border-radius:50%;overflow:hidden;border:3px solid rgba(232,96,28,0.4);margin-bottom:11px;}
.cv-executive .cv-photo img{width:100%;height:100%;object-fit:cover;}
.cv-executive .cv-name{font-size:16px;font-weight:800;line-height:1.2;}
.cv-executive .cv-title{font-size:9.5px;color:#94a3b8;margin-top:5px;text-transform:uppercase;letter-spacing:1px;}
.cv-executive .cv-head-right{flex:1;padding:24px 24px;}
.cv-executive .ring-text{font-size:11px;color:#cbd5e1;line-height:1.7;}
.cv-executive .cv-stats{display:flex;margin-top:14px;border-top:1px solid rgba(255,255,255,0.1);padding-top:14px;}
.cv-executive .cv-stat{flex:1;text-align:center;border-right:1px solid rgba(255,255,255,0.1);}
.cv-executive .cv-stat:last-child{border-right:none;}
.cv-executive .cv-stat-num{font-size:18px;font-weight:800;color:white;}
.cv-executive .cv-stat-label{font-size:9px;color:#94a3b8;text-transform:uppercase;letter-spacing:0.5px;}
.cv-executive .cv-contact-strip{background:#1e293b;padding:7px 24px;display:flex;gap:16px;flex-wrap:wrap;border-top:2px solid #e8601c;}
.cv-executive .cv-contact-strip span{font-size:10px;color:#94a3b8;}
.cv-executive .cv-body{display:flex;}
.cv-executive .cv-left{width:228px;padding:18px;background:#f8f6f4;border-right:1px solid #e0dbd4;flex-shrink:0;}
.cv-executive .cv-right{flex:1;padding:18px 22px;}
.cv-executive .sec-title{font-size:9.5px;font-weight:800;text-transform:uppercase;letter-spacing:1.5px;color:#0f172a;margin-bottom:9px;padding-bottom:4px;border-bottom:2px solid #0f172a;}
.cv-executive .sec-block{margin-bottom:16px;}
.cv-executive .exp-block{margin-bottom:12px;padding-bottom:10px;border-bottom:1px solid #f0ece8;}
.cv-executive .exp-title{font-size:12px;font-weight:700;}
.cv-executive .exp-row{display:flex;justify-content:space-between;align-items:baseline;}
.cv-executive .exp-company{font-size:11px;color:#e8601c;font-weight:600;}
.cv-executive .exp-year{font-size:10px;color:#94a3b8;}
.cv-executive .exp-detail{font-size:11px;color:#475569;margin-top:2px;line-height:1.5;}
.cv-executive .skill-item{font-size:10px;color:#475569;padding:3px 0;border-bottom:1px dotted #e0dbd4;}
.cv-executive .info-row{font-size:10px;color:#475569;margin-bottom:4px;}
.cv-executive .lang-item{font-size:10px;color:#475569;margin-bottom:3px;}
.cv-executive .cert-item{font-size:10px;color:#475569;margin-bottom:3px;}

</style>
</head>
<body>
<div class="app">

<!-- =========== LEFT PANEL =========== -->
<div class="form-panel">

  <div class="panel-header">
    <a href="landing.html" class="panel-logo">
      <div class="panel-logo-icon" style="font-size:13px;font-weight:900;color:white;letter-spacing:-0.5px;">CV</div>
      CV Generator<span>PRO</span>
    </a>
    <div class="panel-header-right">
      <button class="btn-theme" id="themeToggle" title="Ganti Tema">Gelap</button>
      <a href="landing.html" class="btn-back">Beranda</a>
    </div>
  </div>

  <div class="panel-progress">
    <div class="progress-label">
      <span>Kelengkapan CV</span>
      <span id="progressLabel">0%</span>
    </div>
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  </div>

  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('info',this)">Info</button>
    <button class="tab-btn" onclick="switchTab('exp',this)">Karir</button>
    <button class="tab-btn" onclick="switchTab('edu',this)">Edu</button>
    <button class="tab-btn" onclick="switchTab('skills',this)">Skill</button>
    <button class="tab-btn" onclick="switchTab('template',this)">Tema</button>
  </div>

  <div class="form-scroll">

    <!-- INFO -->
    <div class="tab-section active" id="tab-info">
      <div class="sec-label">Informasi Pribadi</div>
      <div class="photo-upload-wrap">
        <div class="photo-preview" id="photoPreview" onclick="document.getElementById('fotoInput').click()">
          <span style="font-size:13px;font-weight:700;color:var(--muted);">FOTO</span>
        </div>
        <div>
          <button class="btn btn-ghost btn-sm" onclick="document.getElementById('fotoInput').click()">Upload Foto</button>
          <div class="photo-upload-info">Klik untuk pilih foto profil</div>
        </div>
      </div>
      <input type="file" id="fotoInput" accept="image/*" style="display:none">

      <div class="field-group"><label class="field-label">Nama Lengkap</label>
        <input type="text" id="nama" placeholder="Masukkan nama lengkap" oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Tanggal Lahir</label>
        <input type="date" id="tglLahir" oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Email</label>
        <input type="email" id="email" placeholder="email@contoh.com" oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Nomor HP</label>
        <input type="tel" id="telepon" placeholder="+62 812 xxxx xxxx" oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Kota Asal</label>
        <input type="text" id="kota" placeholder="Jakarta, Surabaya, ..." oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">LinkedIn / Portofolio</label>
        <input type="text" id="linkedin" placeholder="linkedin.com/in/username" oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Posisi yang Dilamar</label>
        <input type="text" id="posisi" placeholder="Software Engineer, Designer, ..." oninput="liveUpdate()"></div>
      <div class="field-group"><label class="field-label">Ringkasan Diri</label>
        <textarea class="large" id="ringkasan" placeholder="Ceritakan dirimu: pengalaman, keahlian, dan nilai yang kamu tawarkan..." oninput="liveUpdate()"></textarea></div>
    </div>

    <!-- EXPERIENCE -->
    <div class="tab-section" id="tab-exp">
      <div class="sec-label">Pengalaman Kerja</div>
      <div id="experience-list"></div>
      <button class="btn-add" onclick="addExperience()">+ Tambah Pengalaman Kerja</button>
    </div>

    <!-- EDUCATION -->
    <div class="tab-section" id="tab-edu">
      <div class="sec-label">Pendidikan</div>
      <div id="education-list"></div>
      <button class="btn-add" onclick="addEducation()">+ Tambah Pendidikan</button>

      <div class="sec-label" style="margin-top:18px;">Bahasa</div>
      <div id="language-list"></div>
      <button class="btn-add" onclick="addLanguage()">+ Tambah Bahasa</button>

      <div class="sec-label" style="margin-top:18px;">Sertifikasi (Opsional)</div>
      <div id="cert-list"></div>
      <button class="btn-add" onclick="addCert()">+ Tambah Sertifikasi</button>
    </div>

    <!-- SKILLS -->
    <div class="tab-section" id="tab-skills">
      <div class="sec-label">Keahlian / Skill</div>
      <div class="skill-input-row">
        <input type="text" id="skillInput" placeholder="Tambah skill lalu Enter..." onkeydown="if(event.key==='Enter')addSkill()">
        <button class="btn btn-primary btn-sm" onclick="addSkill()">+</button>
      </div>
      <div id="skill-tags" style="margin-top:10px;"></div>
    </div>

    <!-- TEMPLATE -->
    <div class="tab-section" id="tab-template">
      <div class="sec-label">Pilih Template</div>
      <div class="template-grid">
        <div class="template-card selected" onclick="selectTemplate('modern',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#e8601c,#f5a623);color:white;font-size:11px;font-weight:800;">Modern</div>
          <div class="template-name">Modern</div><div class="template-desc">Sidebar oranye</div>
        </div>
        <div class="template-card" onclick="selectTemplate('formal',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#1a1a2e,#16213e);color:white;font-size:11px;font-weight:800;">Formal</div>
          <div class="template-name">Formal</div><div class="template-desc">Elegan &amp; resmi</div>
        </div>
        <div class="template-card" onclick="selectTemplate('classic',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#1e293b,#334155);color:white;font-size:11px;font-weight:800;">Classic</div>
          <div class="template-name">Classic</div><div class="template-desc">Sidebar gelap</div>
        </div>
        <div class="template-card" onclick="selectTemplate('professional',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#0f172a,#e8601c);color:white;font-size:11px;font-weight:800;">Pro</div>
          <div class="template-name">Professional</div><div class="template-desc">Aksen oranye</div>
        </div>
        <div class="template-card" onclick="selectTemplate('minimal',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#f8f6f4,#e0dbd4);color:#4a4540;font-size:11px;font-weight:800;">Minimal</div>
          <div class="template-name">Minimal</div><div class="template-desc">Bersih &amp; simple</div>
        </div>
        <div class="template-card" onclick="selectTemplate('creative',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#1a1714,#c44e14);color:white;font-size:11px;font-weight:800;">Creative</div>
          <div class="template-name">Creative</div><div class="template-desc">Ekspresif</div>
        </div>
        <div class="template-card" onclick="selectTemplate('executive',this)">
          <div class="template-thumb" style="background:linear-gradient(135deg,#0f172a,#1e3a5f);color:white;font-size:11px;font-weight:800;">Executive</div>
          <div class="template-name">Executive</div><div class="template-desc">Premium gelap</div>
        </div>
      </div>
    </div>

  </div><!-- /form-scroll -->

  <div class="control-bar">
    <button class="btn btn-ghost btn-sm" onclick="zoomOut()" title="Perkecil">- Zoom</button>
    <button class="btn btn-ghost btn-sm" onclick="zoomIn()" title="Perbesar">+ Zoom</button>
    <button class="btn btn-ghost btn-sm" onclick="resetZoom()" title="Reset zoom">Reset</button>
    <div style="flex:1;"></div>
    <button class="btn btn-primary" onclick="exportPDF()">Export PDF</button>
  </div>

</div>

<!-- =========== RIGHT PANEL =========== -->
<div class="preview-panel">
  <div id="cv-wrapper"></div>
</div>

</div>

<script>
(function(){

/* === THEME === */
const html = document.documentElement;
const themeBtn = document.getElementById('themeToggle');
function setTheme(t){
  html.setAttribute('data-theme', t);
  themeBtn.textContent = t === 'dark' ? 'Terang' : 'Gelap';
  localStorage.setItem('cvgen_theme', t);
}
(function(){ setTheme(localStorage.getItem('cvgen_theme') || 'light'); })();
themeBtn.addEventListener('click', () => setTheme(html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'));

/* === STATE === */
let state = { photo:null, zoom:0.82, template:'modern', experiences:[], educations:[], languages:[], certs:[], skills:[] };

/* === TABS === */
window.switchTab = function(tab, el){
  document.querySelectorAll('.tab-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-'+tab).classList.add('active');
  if(el) el.classList.add('active');
};

/* === TEMPLATE === */
window.selectTemplate = function(tmpl, el){
  state.template = tmpl;
  document.querySelectorAll('.template-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected'); liveUpdate();
};

/* === PHOTO === */
document.getElementById('fotoInput').addEventListener('change', e => {
  const file = e.target.files[0]; if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => { state.photo = ev.target.result; document.getElementById('photoPreview').innerHTML = `<img src="${state.photo}">`; liveUpdate(); };
  reader.readAsDataURL(file);
});

/* === EXPERIENCE === */
window.addExperience = function(){ state.experiences.push({year:'',company:'',detail:''}); renderExpForm(); liveUpdate(); };
window.removeExp = function(i){ state.experiences.splice(i,1); renderExpForm(); liveUpdate(); };
window.updateExp = function(i,k,v){ state.experiences[i][k]=v; liveUpdate(); };
function renderExpForm(){
  const c = document.getElementById('experience-list'); c.innerHTML = '';
  state.experiences.forEach((exp,i) => {
    c.innerHTML += `<div class="item-card">
      <div class="item-card-header"><span class="item-card-title">Pengalaman ${i+1}</span><button class="btn btn-danger btn-sm" onclick="removeExp(${i})">Hapus</button></div>
      <div class="field-group"><label class="field-label">Tahun Kerja</label><input type="text" placeholder="2021 - 2024" value="${exp.year||''}" oninput="updateExp(${i},'year',this.value)"></div>
      <div class="field-group"><label class="field-label">Perusahaan &amp; Posisi</label><input type="text" placeholder="Software Engineer @ PT. ABC" value="${exp.company||''}" oninput="updateExp(${i},'company',this.value)"></div>
      <div class="field-group"><label class="field-label">Detail Pekerjaan</label><textarea placeholder="Tanggung jawab &amp; pencapaian..." oninput="updateExp(${i},'detail',this.value)">${exp.detail||''}</textarea></div>
    </div>`;
  });
}

/* === EDUCATION === */
window.addEducation = function(){ state.educations.push({degree:'',school:'',year:''}); renderEduForm(); liveUpdate(); };
window.removeEdu = function(i){ state.educations.splice(i,1); renderEduForm(); liveUpdate(); };
window.updateEdu = function(i,k,v){ state.educations[i][k]=v; liveUpdate(); };
function renderEduForm(){
  const c = document.getElementById('education-list'); c.innerHTML = '';
  state.educations.forEach((edu,i) => {
    c.innerHTML += `<div class="item-card">
      <div class="item-card-header"><span class="item-card-title">Pendidikan ${i+1}</span><button class="btn btn-danger btn-sm" onclick="removeEdu(${i})">Hapus</button></div>
      <div class="field-group"><label class="field-label">Gelar / Jurusan</label><input type="text" placeholder="S1 Teknik Informatika" value="${edu.degree||''}" oninput="updateEdu(${i},'degree',this.value)"></div>
      <div class="field-group"><label class="field-label">Sekolah / Universitas</label><input type="text" placeholder="Universitas Indonesia" value="${edu.school||''}" oninput="updateEdu(${i},'school',this.value)"></div>
      <div class="field-group"><label class="field-label">Tahun</label><input type="text" placeholder="2018 - 2022" value="${edu.year||''}" oninput="updateEdu(${i},'year',this.value)"></div>
    </div>`;
  });
}

/* === LANGUAGE === */
window.addLanguage = function(){ state.languages.push({lang:'',level:''}); renderLangForm(); liveUpdate(); };
window.removeLang = function(i){ state.languages.splice(i,1); renderLangForm(); liveUpdate(); };
window.updateLang = function(i,k,v){ state.languages[i][k]=v; liveUpdate(); };
function renderLangForm(){
  const c = document.getElementById('language-list'); c.innerHTML = '';
  state.languages.forEach((l,i) => {
    c.innerHTML += `<div class="item-card">
      <div class="item-card-header"><span class="item-card-title">Bahasa ${i+1}</span><button class="btn btn-danger btn-sm" onclick="removeLang(${i})">Hapus</button></div>
      <div class="row-2">
        <div class="field-group"><label class="field-label">Bahasa</label><input type="text" placeholder="Indonesia" value="${l.lang||''}" oninput="updateLang(${i},'lang',this.value)"></div>
        <div class="field-group"><label class="field-label">Level</label><select onchange="updateLang(${i},'level',this.value)">
          <option value="">Pilih</option>
          <option value="Native" ${l.level==='Native'?'selected':''}>Native</option>
          <option value="Profesional" ${l.level==='Profesional'?'selected':''}>Profesional</option>
          <option value="Menengah" ${l.level==='Menengah'?'selected':''}>Menengah</option>
          <option value="Dasar" ${l.level==='Dasar'?'selected':''}>Dasar</option>
        </select></div>
      </div>
    </div>`;
  });
}

/* === CERT === */
window.addCert = function(){ state.certs.push({name:'',issuer:'',year:''}); renderCertForm(); liveUpdate(); };
window.removeCert = function(i){ state.certs.splice(i,1); renderCertForm(); liveUpdate(); };
window.updateCert = function(i,k,v){ state.certs[i][k]=v; liveUpdate(); };
function renderCertForm(){
  const c = document.getElementById('cert-list'); c.innerHTML = '';
  state.certs.forEach((cert,i) => {
    c.innerHTML += `<div class="item-card">
      <div class="item-card-header"><span class="item-card-title">Sertifikasi ${i+1}</span><button class="btn btn-danger btn-sm" onclick="removeCert(${i})">Hapus</button></div>
      <div class="field-group"><label class="field-label">Nama Sertifikasi</label><input type="text" placeholder="AWS Cloud Practitioner" value="${cert.name||''}" oninput="updateCert(${i},'name',this.value)"></div>
      <div class="row-2">
        <div class="field-group"><label class="field-label">Penerbit</label><input type="text" placeholder="Amazon" value="${cert.issuer||''}" oninput="updateCert(${i},'issuer',this.value)"></div>
        <div class="field-group"><label class="field-label">Tahun</label><input type="text" placeholder="2023" value="${cert.year||''}" oninput="updateCert(${i},'year',this.value)"></div>
      </div>
    </div>`;
  });
}

/* === SKILLS === */
window.addSkill = function(){
  const inp = document.getElementById('skillInput'), val = inp.value.trim(); if(!val) return;
  state.skills.push(val); inp.value = ''; renderSkillTags(); liveUpdate();
};
window.removeSkill = function(i){ state.skills.splice(i,1); renderSkillTags(); liveUpdate(); };
function renderSkillTags(){
  document.getElementById('skill-tags').innerHTML =
    state.skills.map((s,i)=>`<span class="skill-badge">${s}<span class="del" onclick="removeSkill(${i})" title="Hapus">x</span></span>`).join('');
}

/* === HELPERS === */
const G = id => { const e = document.getElementById(id); return e ? e.value.trim() : ''; };
function fmtTgl(v){ if(!v) return ''; return new Date(v).toLocaleDateString('id-ID',{day:'numeric',month:'long',year:'numeric'}); }
function photoBlock(cls){
  return state.photo
    ? `<div class="${cls}"><img src="${state.photo}"></div>`
    : `<div class="${cls}" style="background:#e0dbd4;display:flex;align-items:center;justify-content:center;font-size:24px;">ðŸ‘¤</div>`;
}
function contacts(sep){
  const r=[];
  if(G('tglLahir')) r.push('Lahir: '+fmtTgl(G('tglLahir')));
  if(G('email'))    r.push(G('email'));
  if(G('telepon'))  r.push(G('telepon'));
  if(G('kota'))     r.push(G('kota'));
  if(G('linkedin')) r.push(G('linkedin'));
  return r.join(sep);
}
function expH(style){
  return state.experiences.map(e=>{
    const pts = e.company.split('@').map(s=>s.trim());
    const ttl = pts.length>1?pts[0]:'', cmp = pts.length>1?pts[1]:pts[0];
    switch(style){
      case 'modern': case 'professional':
        return `<div class="exp-block"><div class="exp-year">${e.year||''}</div><div class="exp-title">${ttl||cmp||''}</div><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div>`;
      case 'formal':
        return `<div class="exp-block"><div class="exp-header"><div class="exp-title">${ttl||cmp||''}</div><div class="exp-year">${e.year||''}</div></div><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div>`;
      case 'classic':
        return `<div class="exp-block"><div class="exp-title">${ttl||cmp||''}</div><span class="exp-year">${e.year||''}</span><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div>`;
      case 'minimal':
        return `<div class="exp-block"><div class="exp-year-col">${e.year||''}</div><div><div class="exp-title">${ttl||cmp||''}</div><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div></div>`;
      case 'creative':
        return `<div class="exp-block"><span class="exp-badge">${e.year||''}</span><div class="exp-title">${ttl||cmp||''}</div><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div>`;
      case 'executive':
        return `<div class="exp-block"><div class="exp-row"><div class="exp-title">${ttl||cmp||''}</div><div class="exp-year">${e.year||''}</div></div><div class="exp-company">${ttl?cmp:''}</div><div class="exp-detail">${e.detail||''}</div></div>`;
    }
    return '';
  }).join('');
}
function eduH(style){
  return state.educations.map(e=>{
    if(style==='formal') return `<div class="edu-block"><div><strong>${e.degree||''}</strong><div style="font-size:11px;color:#475569;">${e.school||''}</div></div><div style="font-size:10px;color:#94a3b8;">${e.year||''}</div></div>`;
    return `<p style="font-size:11px;margin-bottom:6px;"><strong>${e.degree||''}</strong><br><span style="color:#64748b;">${e.school||''}${e.year?' ('+e.year+')':''}</span></p>`;
  }).join('');
}
function skillsH(style){
  if(!state.skills.length) return '';
  if(style==='minimal'||style==='formal') return `<div class="skill-wrap">${state.skills.map(s=>`<span class="skill-pill">${s}</span>`).join('')}</div>`;
  if(style==='classic') return state.skills.map(s=>`<div class="skill-bar-item"><div class="skill-bar-label">${s}</div><div class="skill-bar"><div class="skill-bar-fill" style="width:80%"></div></div></div>`).join('');
  if(style==='executive') return state.skills.map(s=>`<div class="skill-item">${s}</div>`).join('');
  if(style==='professional') return state.skills.map(s=>`<div class="skill-pill">${s}</div>`).join('');
  return state.skills.map(s=>`<span class="skill-pill">${s}</span>`).join('');
}
function langH(cls){ return state.languages.map(l=>`<div class="${cls}">${l.lang}${l.level?' â€” <em>'+l.level+'</em>':''}</div>`).join(''); }
function certH(cls){ return state.certs.map(c=>`<div class="${cls}">${c.name}${c.issuer?' - '+c.issuer:''}${c.year?' ('+c.year+')':''}</div>`).join(''); }

/* === BUILD === */
function build(){
  const n=G('nama'), p=G('posisi'), r=G('ringkasan'), t=state.template;
  const c3=contacts(' &nbsp;|&nbsp; '), cd=contacts(' Â· ');

  const sidebar = (t2) => `
    ${state.skills.length?`<div class="sidebar-sec"><div class="sidebar-label">Keahlian</div>${skillsH(t2)}</div>`:''}
    ${state.languages.length?`<div class="sidebar-sec"><div class="sidebar-label">Bahasa</div>${langH('lang-item')}</div>`:''}
    ${state.certs.length?`<div class="sidebar-sec"><div class="sidebar-label">Sertifikasi</div>${certH('cert-item')}</div>`:''}`;

  const main = (t2) => `
    ${r?`<div class="sec-block"><div class="sec-title">Tentang Saya</div><div class="ring-text">${r}</div></div>`:''}
    ${state.experiences.length?`<div class="sec-block"><div class="sec-title">Pengalaman Kerja</div>${expH(t2)}</div>`:''}
    ${state.educations.length?`<div class="sec-block"><div class="sec-title">Pendidikan</div>${eduH(t2)}</div>`:''}`;

  if(t==='modern') return `<div class="cv-modern">
    <div class="cv-header">${photoBlock('cv-photo')}<div><div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div><div class="cv-contact">${c3}</div></div></div>
    <div class="cv-body"><div class="cv-main">${main('modern')}</div><div class="cv-sidebar">${sidebar('modern')}</div></div></div>`;

  if(t==='formal') return `<div class="cv-formal">
    <div class="cv-header">${state.photo?`<div class="cv-photo-wrap">${photoBlock('cv-photo')}</div>`:''}<div class="cv-name">${n||'NAMA LENGKAP'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div><div class="cv-contact">${cd}</div></div>
    <div class="cv-body">
      ${r?`<div class="sec-block"><div class="sec-title">Profil</div><div class="ring-text">${r}</div></div>`:''}
      ${state.experiences.length?`<div class="sec-block"><div class="sec-title">Pengalaman Kerja</div>${expH('formal')}</div>`:''}
      ${state.educations.length?`<div class="sec-block"><div class="sec-title">Pendidikan</div>${eduH('formal')}</div>`:''}
      ${state.skills.length?`<div class="sec-block"><div class="sec-title">Keahlian</div>${skillsH('formal')}</div>`:''}
      ${state.languages.length||state.certs.length?`<div class="sec-block"><div class="info-grid">${state.languages.length?`<div><div class="sec-title">Bahasa</div>${langH('lang-item')}</div>`:''} ${state.certs.length?`<div><div class="sec-title">Sertifikasi</div>${certH('cert-item')}</div>`:''}</div></div>`:''}
    </div></div>`;

  if(t==='classic') return `<div class="cv-classic">
    <div class="cv-header">${photoBlock('cv-photo')}<div><div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div><div class="cv-contact">${c3}</div></div></div>
    <div class="cv-body"><div class="cv-left">${sidebar('classic')}</div><div class="cv-right">${main('classic')}</div></div></div>`;

  if(t==='professional') return `<div class="cv-professional">
    <div class="cv-header"><div class="cv-left-head"><div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div><div class="cv-tags">${c3.split('|').filter(Boolean).map(s=>`<span class="cv-tag">${s.trim()}</span>`).join('')}</div></div>${photoBlock('cv-photo')}</div>
    <div class="cv-stripe"></div>
    <div class="cv-body"><div class="cv-main">${main('professional')}</div><div class="cv-sidebar">${sidebar('professional')}</div></div></div>`;

  if(t==='minimal') return `<div class="cv-minimal">
    <div class="cv-header">${state.photo?photoBlock('cv-photo'):''}<div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div><div class="cv-contact">${cd}</div></div>
    <div class="cv-body">
      ${r?`<div class="sec-block"><div class="sec-title">Tentang</div><div class="ring-text">${r}</div></div>`:''}
      ${state.experiences.length?`<div class="sec-block"><div class="sec-title">Pengalaman</div>${expH('minimal')}</div>`:''}
      ${state.educations.length?`<div class="sec-block"><div class="sec-title">Pendidikan</div>${eduH('minimal')}</div>`:''}
      ${state.skills.length?`<div class="sec-block"><div class="sec-title">Keahlian</div>${skillsH('minimal')}</div>`:''}
      ${state.languages.length||state.certs.length?`<div class="sec-block"><div class="info-row">${state.languages.length?`<div><div class="sec-title">Bahasa</div>${langH('lang-item')}</div>`:''}${state.certs.length?`<div><div class="sec-title">Sertifikasi</div>${certH('cert-item')}</div>`:''}</div></div>`:''}
    </div></div>`;

  if(t==='creative') return `<div class="cv-creative">
    <div class="cv-header"><div class="cv-top">${photoBlock('cv-photo')}<div><div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div></div></div>
    <div class="cv-contact-bar">${cd}</div></div>
    <div class="cv-body"><div class="cv-main">${main('creative')}</div><div class="cv-sidebar">${sidebar('creative')}</div></div></div>`;

  if(t==='executive'){
    const yrs=state.experiences.length;
    return `<div class="cv-executive">
    <div class="cv-header"><div class="cv-head-left">${photoBlock('cv-photo')}<div class="cv-name">${n||'Nama Lengkap'}</div><div class="cv-title">${p||'Posisi yang Dilamar'}</div></div>
    <div class="cv-head-right"><div class="ring-text">${r||'Ringkasan profil profesional Anda...'}</div>
    <div class="cv-stats"><div class="cv-stat"><div class="cv-stat-num">${yrs}</div><div class="cv-stat-label">Pengalaman</div></div><div class="cv-stat"><div class="cv-stat-num">${state.skills.length}</div><div class="cv-stat-label">Keahlian</div></div><div class="cv-stat"><div class="cv-stat-num">${state.certs.length}</div><div class="cv-stat-label">Sertifikat</div></div></div></div></div>
    <div class="cv-contact-strip">${c3}</div>
    <div class="cv-body"><div class="cv-left">${sidebar('executive')}</div><div class="cv-right">
      ${state.experiences.length?`<div class="sec-block"><div class="sec-title">Pengalaman Kerja</div>${expH('executive')}</div>`:''}
      ${state.educations.length?`<div class="sec-block"><div class="sec-title">Pendidikan</div>${eduH('executive')}</div>`:''}
    </div></div></div>`;
  }
  return '';
}

/* === UPDATE === */
function liveUpdate(){
  const w = document.getElementById('cv-wrapper');
  w.style.transform = `scale(${state.zoom})`;
  w.style.transformOrigin = 'top center';
  w.innerHTML = build();
  updateProgress();
}
function updateProgress(){
  let s = ['nama','email','telepon','kota','posisi','ringkasan'].filter(id=>G(id)).length;
  if(state.photo) s++; if(state.experiences.length) s++; if(state.educations.length) s++; if(state.skills.length) s++;
  const pct = Math.round((s/10)*100);
  document.getElementById('progressBar').style.width = pct+'%';
  document.getElementById('progressLabel').textContent = pct+'%';
}

window.zoomIn    = () => { state.zoom = Math.min(1.4, state.zoom+0.05); liveUpdate(); };
window.zoomOut   = () => { state.zoom = Math.max(0.4, state.zoom-0.05); liveUpdate(); };
window.resetZoom = () => { state.zoom = 0.82; liveUpdate(); };

window.exportPDF = function(){
  const w = document.getElementById('cv-wrapper'), orig = w.style.transform;
  w.style.transform = 'scale(1)';
  html2pdf().set({ margin:0, filename:'CV-'+(G('nama')||'Saya')+'.pdf', image:{type:'jpeg',quality:0.98}, html2canvas:{scale:2,useCORS:true}, jsPDF:{unit:'mm',format:'a4',orientation:'portrait'} })
    .from(w).save().then(()=>{ w.style.transform = orig; });
};

renderExpForm(); renderEduForm(); renderLangForm(); renderCertForm(); renderSkillTags(); liveUpdate();

})();
</script>
</body>
</html>
